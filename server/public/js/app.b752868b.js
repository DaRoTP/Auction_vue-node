(function(t){function e(e){for(var s,r,o=e[0],c=e[1],l=e[2],d=0,h=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&h.push(i[r][0]),i[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(h.length)h.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var c=a[o];0!==i[c]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={app:0},n=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0155":function(t,e,a){"use strict";var s=a("1502"),i=a.n(s);i.a},"0f65":function(t,e,a){},1:function(t,e){},"11cf":function(t,e,a){"use strict";var s=a("d0a1"),i=a.n(s);i.a},"14fd":function(t,e,a){"use strict";var s=a("bc1d"),i=a.n(s);i.a},1502:function(t,e,a){},"16a3":function(t,e,a){"use strict";var s=a("cd8c"),i=a.n(s);i.a},"16c0":function(t,e,a){"use strict";var s=a("e424"),i=a.n(s);i.a},"206d":function(t,e,a){"use strict";var s=a("4413"),i=a.n(s);i.a},"211a":function(t,e,a){"use strict";var s=a("7cd0"),i=a.n(s);i.a},"21bb":function(t,e,a){"use strict";var s=a("2dad"),i=a.n(s);i.a},"252c":function(t,e,a){},"27de":function(t,e,a){"use strict";var s=a("41e8"),i=a.n(s);i.a},"2aa4":function(t,e,a){},"2dad":function(t,e,a){},"2e4b":function(t,e,a){"use strict";var s=a("ba9a"),i=a.n(s);i.a},4057:function(t,e,a){"use strict";var s=a("8b13"),i=a.n(s);i.a},"41e8":function(t,e,a){},4413:function(t,e,a){},"458c":function(t,e,a){"use strict";var s=a("252c"),i=a.n(s);i.a},4678:function(t,e,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=n(t);return a(e)}function n(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=n,t.exports=i,i.id="4678"},"4b48":function(t,e,a){"use strict";var s=a("89f7"),i=a.n(s);i.a},"4dc3":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e),a.d(e,"bus",(function(){return Va}));var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("pop-down"),a("navbar"),a("div",{staticClass:"content-container"},[a("router-view")],1)],1)},n=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{attrs:{id:"main-nav"}},[s("div",{staticClass:"nav-container"},[s("router-link",{attrs:{id:"app-logo",to:"/"}},[s("img",{attrs:{src:a("9b19"),alt:""}})]),null!==t.getUser?s("router-link",{staticClass:"nav-item",attrs:{to:"/profile/my-auctions"}},[t._v(t._s(t.getUser))]):t._e(),s("div",{staticClass:"full-view"},[null!==t.getUser?s("router-link",{staticClass:"nav-item",attrs:{to:"/chat"}},[t._v("Chat")]):t._e(),null==t.getUser?s("router-link",{staticClass:"nav-item",attrs:{to:"/login"}},[t._v("Login")]):t._e(),null==t.getUser?s("router-link",{staticClass:"nav-item",attrs:{to:"/register"}},[t._v("Register")]):t._e(),null!==t.getUser?s("a",{staticClass:"nav-item",on:{click:t.logOutUser}},[t._v("Logout")]):t._e()],1),s("div",{attrs:{id:"nav-hamburger"},on:{click:t.toggleColapsedMenu}},[t._v("BURG")])],1),this.colapsed?s("div",{staticClass:"colapsed-items"},[null!==t.getUser?s("router-link",{staticClass:"nav-item",attrs:{to:"/chat"}},[t._v("Chat")]):t._e(),null==t.getUser?s("router-link",{staticClass:"nav-item",attrs:{to:"/login"}},[t._v("Login")]):t._e(),null==t.getUser?s("router-link",{staticClass:"nav-item",attrs:{to:"/register"}},[t._v("Register")]):t._e(),null!==t.getUser?s("a",{staticClass:"nav-item",on:{click:t.logOutUser}},[t._v("Logout")]):t._e()],1):t._e()])},o=[],c=a("2f62"),l={name:"Navbar",data(){return{colapsed:!1}},methods:{toggleColapsedMenu(){this.colapsed=!this.colapsed},logOutUser(){this.$store.dispatch("LOGOUT")}},computed:Object(c["b"])(["getUser"])},u=l,d=(a("16a3"),a("2877")),h=Object(d["a"])(u,r,o,!1,null,null,null),p=h.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pop-down-overlay"},[t.show?a("div",{staticClass:"pop-down-container",class:t.messageType},[a("span",{staticClass:"content"},[t._v(t._s(this.content))]),a("button",{staticClass:"exit",on:{click:t.hideMessage}},[t._v("X")])]):t._e()])},v=[],g={name:"PopDown",data(){return{show:!1,content:"",messageType:"",timer:""}},created(){Va.$on("changeMessage",(t,e)=>{this.show=t!==this.content,this.content=t,this.messageType=e})},updated(){this.timer=setTimeout(()=>{this.content="",this.messageType="",this.show=!1},5e3)},watch:{show(t,e){t||clearTimeout(this.timer)}},methods:{hideMessage(){this.show=!1}}},f=g,b=(a("14fd"),Object(d["a"])(f,m,v,!1,null,null,null)),y=b.exports,_={name:"App",components:{Navbar:p,PopDown:y},created(){this.authenticateUser()},methods:{async authenticateUser(){try{const t=await this.$http.get("api/auth/isAuthenticated");this.$store.commit("UPDATE_USER",t.data.user)}catch(t){this.$store.commit("UPDATE_USER",null)}}}},C=_,j=(a("5c0b"),Object(d["a"])(C,i,n,!1,null,null,null)),w=j.exports,D=a("8c4f"),A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home-container"},[a("div",{staticClass:"btn-container"},[t.getUsername?a("router-link",{staticClass:"primary-btn",attrs:{to:"/new-auction"}},[t._v("Create new auction")]):t._e()],1),t.auctions.spinner?t._e():a("div",{staticClass:"home-auction-container"},[t._l(t.auctions.list,(function(t){return a("auction-card",{key:t._id,attrs:{id:t._id,name:t.name,descriptions:t.description,image:t.image,price:t.price,endDate:new Date(t.endDate),startDate:new Date(t.startDate)}})})),a("pagination",{attrs:{currentPage:t.auctions.currentPage,prev:t.auctions.prevPage,next:t.auctions.nextPage},model:{value:t.auctions.currentPage,callback:function(e){t.$set(t.auctions,"currentPage",e)},expression:"auctions.currentPage"}})],2)])},x=[],k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",{staticClass:"auction-link",attrs:{to:"/auction/"+this.id}},[a("div",{staticClass:"auction-card-container"},[a("div",{staticClass:"card-overlay"},[a("h2",{staticClass:"auction-title"},[t._v(t._s(t.name))]),a("section",{staticClass:"description"},[t._v(t._s(t.descriptions))])]),a("v-image",{attrs:{classes:"auction-image",imageUrl:t.image}}),a("div",{staticClass:"content-body"},[a("h2",{staticClass:"auction-title"},[t._v(t._s(t.name))])]),a("div",{staticClass:"time-count-down-label"},[a("span",{staticClass:"time"},[t._v(t._s(this.now))]),a("span",{staticClass:"price"},[t._v(t._s(t.price))])])],1)])},$=[];const P=t=>{const e=1e3,a=60*e,s=60*a,i=24*s,n=()=>{const n=new Date,r=t-n;if(r<0)return"expired";const o=Math.floor(r/i),c=Math.floor(r%i/s),l=Math.floor(r%s/a),u=Math.floor(r%a/e);return o>0?`${o}d ${c}h`:c>0?`${c}h ${l}m`:l>0?`${l}m ${u}s`:u+"s"};return n()};var S=P,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("img",{class:t.classes,attrs:{src:t.imageUrl},on:{error:t.imageLoadError}})},U=[],E={name:"VImage",props:{imageUrl:{type:String},classes:{type:String}},methods:{imageLoadError(t){t.target.src="/image_not_loaded.svg"}}},O=E,R=Object(d["a"])(O,F,U,!1,null,null,null),L=R.exports,I={name:"AuctionCard",components:{VImage:L},props:{id:{type:String},name:{type:String},descriptions:{type:String},image:{type:String},price:{type:Number},endDate:{type:Date},startDate:{type:Date}},data(){return{now:"expired",liveCounDownInterval:null}},created(){this.liveAuctionCountDown()},beforeDestroy(){clearInterval(this.liveCounDownInterval)},methods:{liveAuctionCountDown(){const t=new Date;let e,a;if(t<this.startDate){if(this.now="starts in "+S(this.startDate),e=this.startDate-t,e>0){const t=e<=36e5?1e3:6e4;this.liveCounDownInterval=setInterval(()=>{a=S(this.startDate),"expired"===a?(this.isAuctionLive=!0,a=S(this.endDate),this.isAuctionLive="expired"!==a,this.now=a):this.now="starts in "+S(this.startDate)},t)}}else if(t<this.endDate&&(this.now=S(this.endDate),e=this.endDate-t,e>0)){const t=e<=36e5?1e3:6e4;this.liveCounDownInterval=setInterval(()=>{a=S(this.endDate),this.isAuctionLive="expired"!==a,this.now=a},t)}this.now=isNaN(this.endDate)?"buy now":this.now}}},M=I,V=(a("11cf"),Object(d["a"])(M,k,$,!1,null,null,null)),T=V.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",{staticClass:"auction-link-mini",attrs:{to:"/auction/"+this.id}},[a("div",{staticClass:"auction-card-mini-container"},[a("v-image",{attrs:{classes:"auction-image",imageUrl:t.image}}),a("div",{staticClass:"content-body"},[a("h2",{staticClass:"auction-title"},[t._v(t._s(t.name))]),a("div",{staticClass:"time-count-down-label"},[isNaN(t.endDate)?t._e():a("span",{staticClass:"time"},[t._v("Auction")]),isNaN(t.endDate)?a("span",{staticClass:"time"},[t._v("Buy Now")]):t._e()])])],1)])},N=[],z={name:"AuctionCard",components:{VImage:L},props:{id:{type:String},name:{type:String},descriptions:{type:String},image:{type:String},price:{type:Number},endDate:{type:Date}}},q=z,Q=(a("4057"),Object(d["a"])(q,B,N,!1,null,null,null)),H=Q.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"auction-card-live-container"},[a("div",{staticClass:"main-auction-info"},[a("v-image",{attrs:{imageUrl:t.image}}),a("h3",{staticClass:"auction-name"},[t._v(t._s(t.name))])],1),a("div",{staticClass:"biding-table"},[a("span",{staticClass:"time"},[t._v(t._s(t.now))]),t._l(t.bids,(function(t){return a("bid-card",{key:t.id,attrs:{timeStamp:new Date(t.timeStamp),price:parseFloat(t.price),username:t.author.username}})}))],2),a("div",{staticClass:"input-bid-container"},[t.isAuctionLive?a("place-bid-input",{attrs:{auctionId:t.id}}):t._e(),a("router-link",{staticClass:"go-to-link",attrs:{to:"/auction/"+this.id}},[t._v("go to")])],1)])},J=[],X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bid-card-container"},[a("div",{staticClass:"text-content"},[a("strong",{staticClass:"username"},[t._v(t._s(t.username))]),a("span",{staticClass:"time-stamp"},[t._v(t._s(t.momentTime))])]),a("div",{staticClass:"price-label"},[t._v(" "+t._s(t.price)+" "),a("span",{staticClass:"currency"},[t._v("USD")])])])},Z=[],K=a("c1df"),W=a.n(K),Y={name:"BidCard",props:{username:{type:String},price:{type:Number},timeStamp:{type:Date,default:Date.now()}},computed:{momentTime(){return W()(this.timeStamp).fromNow()}}},tt=Y,et=(a("dd5f"),Object(d["a"])(tt,X,Z,!1,null,null,null)),at=et.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-area"},[a("label",{attrs:{for:"username"}},[t._v(t._s(t.name+":"))]),a("textarea",{class:{error:t.error.length>0},attrs:{name:t.name},domProps:{value:t.value},on:{input:function(e){return t.updateValue(e.target.value)}}}),a("span",{staticClass:"error-msg"},[t._v(t._s(t.error))])])},it=[];const nt=(t,e)=>{if(e.required){const e=""!==t.trim();if(!e)return"can't be blank"}if(e.minLength){const a=t.length>=e.minLength;if(!a)return"must not be shorter than "+e.minLength}if(e.maxLength){const a=t.length<=e.maxLength;if(!a)return"must not be longer than "+e.maxLength}if(e.string){const e=/^([a-zA-Z ]*)$/.test(t);if(!e)return"some characters are not allowed"}if(e.spaces){const e=/^([^ ]*)$/.test(t);if(!e)return"spaces are not allowd"}if(e.number){const e=/^(\d*)$/.test(t);if(!e)return"must be a number"}return""};var rt=nt,ot={name:"AreaText",props:{value:{type:String},name:{type:String},validation:{type:Object}},data(){return{error:""}},methods:{updateValue(t){void 0!==this.validation&&(this.error=rt(t,this.validation)),this.$emit("input",t),this.$emit("validateField",this.name,0===this.error.length)}}},ct=ot,lt=(a("4b48"),Object(d["a"])(ct,st,it,!1,null,null,null)),ut=lt.exports,dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"place-bid-input"},[a("button",{staticClass:"primary-btn",on:{click:t.placeBid}},[t._v("bid")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],attrs:{min:"0",type:"Number"},domProps:{value:t.price},on:{input:function(e){e.target.composing||(t.price=e.target.value)}}}),a("span",{staticClass:"currency"},[t._v(t._s(t.currency))])])},ht=[],pt=a("8055"),mt=a.n(pt),vt={name:"PlaceBidInput",props:{currency:{type:String,default:"USD"},auctionId:{type:String}},data(){return{price:0,socket:mt()("https://localhost:3000")}},methods:{async placeBid(){try{const t=await this.$http.patch("/api/auction/"+this.auctionId,{price:this.price});this.socket.emit("liveBid",{roomId:this.auctionId,bid:t.data.bid})}catch(t){Va.$emit("changeMessage",t.response.data.msg.price,"error")}}}},gt=vt,ft=(a("e917"),Object(d["a"])(gt,dt,ht,!1,null,null,null)),bt=ft.exports,yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-bar"},[a("input",{attrs:{placeholder:"Search",type:"text"},on:{input:function(e){return t.updateValue(e.target.value)}}}),a("button",{on:{click:t.execSearch}},[t._v("search")])])},_t=[],Ct={name:"SearchBard",methods:{updateValue(t){this.$emit("input",t)},execSearch(){this.$emit("search")}}},jt=Ct,wt=(a("57af"),Object(d["a"])(jt,yt,_t,!1,null,null,null)),Dt=wt.exports,At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"switch-container"},[a("span",{attrs:{id:"true-label"}},[t._v(t._s(t.trueLabel))]),a("button",{staticClass:"switch-body",class:{on:t.isAuction},attrs:{value:t.isAuction},on:{click:t.toggleSwitchState}},[a("div",{staticClass:"switch"})]),a("span",{attrs:{id:"false-label"}},[t._v(t._s(t.falseLabel))])])},xt=[],kt={model:{prop:"isAuction",event:"click"},name:"SwitchButton",props:{trueLabel:{type:String,default:"on"},falseLabel:{type:String,default:"off"},isAuction:{type:Boolean,default:!1}},methods:{toggleSwitchState(){this.$emit("click",!this.isAuction)}}},$t=kt,Pt=(a("458c"),Object(d["a"])($t,At,xt,!1,null,null,null)),St=Pt.exports,Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-input"},[a("label",{attrs:{for:"username"}},[t._v(t._s(t.name+":"))]),a("input",{class:{error:t.isValid},attrs:{min:t.min,type:t.type},domProps:{value:t.value},on:{input:function(e){return t.updateValue(e.target.value)}}}),a("span",{staticClass:"error-msg"},[t._v(t._s(t.dislpayError))])])},Ut=[],Et={name:"TextInput",props:{value:{type:String},min:{type:Number,default:0},type:{type:String,default:"text"},name:{type:String},validation:{type:Object},error:{type:String,default:""}},data(){return{errorState:""}},methods:{updateValue(t){this.errorState=rt(t,this.validation),this.$emit("input",t),this.$emit("validateField",this.name,0===this.errorState.length)}},computed:{isValid(){return""!==this.error||this.errorState.length>0},dislpayError(){return""!==this.errorState?this.errorState:this.error}}},Ot=Et,Rt=(a("8cf7"),Object(d["a"])(Ot,Ft,Ut,!1,null,null,null)),Lt=Rt.exports,It={name:"AuctionCardLive",components:{BidCard:at,PlaceBidInput:bt,VImage:L},data(){return{socket:mt()("https://localhost:3000"),now:"",liveCountDownInterval:null,myBid:"",isAuctionLive:!1}},props:{id:{type:String},name:{type:String},image:{type:String},price:{type:Number},endDate:{type:Date},bids:{type:Array}},created(){this.bids=this.bids.reverse(),this.joinBiddingRoom(),this.isAuctionLive=!this.isEnded,this.liveAuctionCountDown()},beforeDestroy(){clearInterval(this.liveCountDownInterval),this.leaveBiddingRoom()},methods:{joinBiddingRoom(){this.socket.emit("joinBidding",{room:this.id}),this.socket.on("sendBid",t=>{this.bids.unshift(t)})},leaveBiddingRoom(){this.socket.emit("leaveBidding",{room:this.id}),this.socket.removeAllListeners()},liveAuctionCountDown(){const t=new Date;let e,a;if(t<this.endDate&&(this.now=S(this.endDate),e=this.endDate-t,e>0)){const t=e<=36e5?1e3:6e4;this.liveCounDownInterval=setInterval(()=>{a=S(this.endDate),this.isAuctionLive="expired"!==a,this.now=a},t)}}},computed:{isEnded(){const t=new Date,e=new Date(this.endDate);return t>e}}},Mt=It,Vt=(a("e93e"),Object(d["a"])(Mt,G,J,!1,null,null,null)),Tt=Vt.exports,Bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pagination-container"},[a("div",{staticClass:"btn-container",class:{show:t.prev}},[a("button",{staticClass:"pgination-btn",on:{click:t.prevPage}},[t._v("Prev")])]),t.prev||t.next?a("span",{staticClass:"selected"},[t._v(t._s(this.currentPage))]):t._e(),a("div",{staticClass:"btn-container",class:{show:t.next}},[a("button",{staticClass:"pgination-btn",on:{click:t.nextPage}},[t._v("Next")])])])},Nt=[],zt={name:"Pagination",model:{prop:"currentPage",event:"click"},props:{prev:null,next:null,currentPage:null},methods:{nextPage(){this.$emit("click",this.currentPage+1)},prevPage(){this.$emit("click",this.currentPage-1)}}},qt=zt,Qt=(a("5eaf"),Object(d["a"])(qt,Bt,Nt,!1,null,null,null)),Ht=Qt.exports,Gt={name:"Home",components:{AuctionCard:T,Pagination:Ht},data(){return{auctions:{nextPage:null,prevPage:null,currentPage:1,list:[],spinner:!0},searchQuery:""}},created(){this.fetchAuctions(),this.getUnreadMessageRooms()},methods:{...Object(c["b"])(["getUser"]),async fetchAuctions(){try{const t=await this.$http.get(`/api/auction?page=${this.auctions.currentPage}&limit=6`),{items:e,next:a,prev:s}=t.data.auctions;this.auctions.list=e,this.auctions.nextPage=a,this.auctions.prevPage=s,this.auctions.spinner=!1}catch(t){console.log(t.reposne)}},async getUnreadMessageRooms(){try{const t=await this.$http.get("/api/chat/unread-messages");t.data.chatRooms.length>0&&Va.$emit("changeMessage",`you have ${t.data.chatRooms.length} unread messages`,"")}catch(t){console.log("err",t)}}},watch:{getCurrentPage(){this.fetchAuctions()}},computed:{getUsername(){return this.getUser()},getCurrentPage(){return this.auctions.currentPage}}},Jt=Gt,Xt=(a("21bb"),Object(d["a"])(Jt,A,x,!1,null,null,null)),Zt=Xt.exports,Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("div",{staticClass:"login-container"},[a("h2",[t._v("Login")]),t._l(t.loginFields,(function(e){return a("text-input",{key:e.name,attrs:{value:e.value,name:e.name,type:e.type,validation:e.validation,error:e.error},on:{validateField:t.validateFieldLogin},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"field.value"}})})),a("button",{staticClass:"primary-btn",attrs:{type:"submit",disabled:!t.isReadyToSent},on:{click:t.login}},[t._v("Login")])],2)])},Wt=[],Yt={name:"Login",components:{TextInput:Lt},data(){return{loginFields:[{isValid:!1,name:"username",value:"",error:"",validation:{required:!0,spaces:!1}},{isValid:!1,name:"password",value:"",error:"",type:"password",validation:{required:!0,spaces:!1}}]}},methods:{...Object(c["b"])(["getUser"]),...Object(c["c"])(["UPDATE_USER"]),validateFieldLogin(t,e){this.loginFields=this.loginFields.map(a=>t===a.name?{...a,isValid:e}:a)},async login(){try{const t=await this.$http.post("/api/auth/login",{username:this.loginFields[0].value,password:this.loginFields[1].value});this.$router.push("/"),this.UPDATE_USER(t.data.user.username)}catch(t){this.UPDATE_USER(null),401===t.response.status&&(this.loginFields=this.loginFields.map(t=>({...t,error:"bad login"})))}}},computed:{isReadyToSent(){return this.loginFields.reduce((t,e)=>t&&e.isValid,!0)}}},te=Yt,ee=(a("206d"),Object(d["a"])(te,Kt,Wt,!1,null,null,null)),ae=ee.exports,se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("div",{staticClass:"register-container"},[a("h2",[t._v("Register")]),t._l(t.loginFields,(function(e){return a("text-input",{key:e.name,attrs:{value:e.value,name:e.name,type:e.type,validation:e.validation,error:e.error},on:{validateField:t.validateFieldLogin},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"field.value"}})})),a("button",{staticClass:"primary-btn",attrs:{disabled:!t.isReadyToSent},on:{click:t.registerUser}},[t._v("Register")])],2)])},ie=[],ne={name:"Register",components:{TextInput:Lt},data(){return{loginFields:[{isValid:!1,name:"username",value:"",error:"",validation:{required:!0,spaces:!1,minLength:3,maxLength:15}},{isValid:!1,name:"password",value:"",error:"",validation:{required:!0,spaces:!1,minLength:5}}]}},methods:{async registerUser(){try{await this.$http.post("/api/auth/register",{username:this.loginFields[0].value,password:this.loginFields[1].value}),Va.$emit("changeMessage","succefully registered","success"),this.$router.push("/login")}catch(t){const e=t.response.data.msg;for(const a in e)this.loginFields=this.loginFields.map(t=>t.name===a?{...t,error:e[a]}:t)}},validateFieldLogin(t,e){this.loginFields=this.loginFields.map(a=>t===a.name?{...a,isValid:e}:a)}},computed:{isReadyToSent(){return this.loginFields.reduce((t,e)=>t&&e.isValid,!0)}}},re=ne,oe=(a("a894"),Object(d["a"])(re,se,ie,!1,null,null,null)),ce=oe.exports,le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("div",{staticClass:"new-auction-container"},[a("h2",[t._v("Create new auction")]),t._l(t.mainFields,(function(e){return a("text-input",{key:e.name,attrs:{value:e.value,name:e.name,type:e.type,validation:e.validation},on:{validateField:t.vallidateAuctionFields},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"field.value"}})})),a("area-text",{attrs:{value:t.description.value,name:t.description.name,validation:t.description.validation},on:{validateField:t.vallidateAuctionFields},model:{value:t.description.value,callback:function(e){t.$set(t.description,"value",e)},expression:"description.value"}}),a("switch-button",{attrs:{trueLabel:"buy now",falseLabel:"auction"},model:{value:t.isAuction,callback:function(e){t.isAuction=e},expression:"isAuction"}}),a("div",{staticClass:"end-date-container",class:{open:t.isAuction}},t._l(t.dateFields,(function(e){return a("text-input",{key:e.name,attrs:{value:e.value,name:e.name,type:e.type,validation:e.validation},on:{validateField:t.vallidateAuctionFields},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"field.value"}})})),1),a("button",{staticClass:"primary-btn",attrs:{type:"submit",disabled:!t.isReadyToSent},on:{click:t.createAuction}},[t._v("Create")])],2)])},ue=[],de={name:"NewAuction",components:{TextInput:Lt,AreaText:ut,SwitchButton:St},data(){return{mainFields:[{isValid:!0,name:"image link",value:"",validation:{spaces:!0}},{isValid:!1,name:"name",value:"",validation:{required:!0}},{isValid:!1,name:"starting price",value:"",type:"Number",validation:{required:!0,spaces:!0}},{isValid:!0,name:"tags",value:"",validation:{}}],description:{isValid:!1,name:"description",value:"",validation:{required:!0}},isAuction:!0,dateFields:[{isValid:!1,name:"start date",value:"",type:"Date",validation:{required:!0}},{isValid:!1,name:"start time",value:"",type:"Time",validation:{required:!0}},{isValid:!1,name:"end date",value:"",type:"Date",validation:{required:!0}},{isValid:!1,name:"end time",value:"",type:"Time",validation:{required:!0}}]}},created(){},methods:{...Object(c["b"])(["getUser"]),async createAuction(){try{const t=await this.$http.post("/api/auction",{image:this.mainFields[0].value,name:this.mainFields[1].value,price:parseFloat(this.mainFields[2].value),tags:this.mainFields[3].value.split(" "),description:this.description.value,startDate:this.isAuction?`${this.dateFields[0].value} ${this.dateFields[1].value}`:void 0,endDate:this.isAuction?`${this.dateFields[2].value} ${this.dateFields[3].value}`:void 0});this.$router.push("/auction/"+t.data.auction._id)}catch(t){let e="something went wrong";void 0!==t.response.data.msg.endDate?e=t.response.data.msg.endDate:void 0!==t.response.data.msg.startDate&&(e=t.response.data.msg.startDate),Va.$emit("changeMessage",e,"error")}},vallidateAuctionFields(t,e){"description"===t&&(this.description.isValid=e),this.mainFields=this.mainFields.map(a=>t===a.name?{...a,isValid:e}:a),this.dateFields=this.dateFields.map(a=>t===a.name?{...a,isValid:e}:a)}},computed:{isReadyToSent(){const t=this.mainFields.reduce((t,e)=>t&&e.isValid,!0);let e=this.dateFields.reduce((t,e)=>t&&e.isValid,!0);e=!this.isAuction||e;const a=this.description.isValid;return t&&a&&e}}},he=de,pe=(a("c5b1"),Object(d["a"])(he,le,ue,!1,null,null,null)),me=pe.exports,ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"auction-show-container"},[a("section",{staticClass:"auction-image"},[a("v-image",{attrs:{imageUrl:t.image}})],1),a("section",{staticClass:"auction-description"},[a("h2",{staticClass:"auction-title"},[t._v(t._s(t.name))]),t.startDate?a("div",{staticClass:"end-date"},[a("strong",[t._v("Auction start date:")]),a("span",[t._v(t._s(t.formatedDate(this.startDate)))])]):t._e(),t.endDate?a("div",{staticClass:"end-date"},[a("strong",[t._v("Auction end date:")]),a("span",[t._v(t._s(t.formatedDate(this.endDate)))])]):t._e(),a("div",{staticClass:"end-date"},[a("strong",[t._v("Author:")]),a("span",[t._v(t._s(this.author))])]),a("div",{staticClass:"price"},[void 0!==t.startDate?a("strong",[t._v("Initial price:")]):t._e(),void 0===t.startDate?a("strong",[t._v("Price:")]):t._e(),a("span",[t._v(" "+t._s(t.price)+" "),a("span",{staticClass:"currency"},[t._v("USD")])]),void 0===t.startDate&&void 0===t.buyer&&t.getUser()?a("button",{staticClass:"buy-now-btn primary-btn",on:{click:t.buyAuction}},[t._v("Buy Now")]):t._e()]),t.shouldDisplayBuyer?a("div",{staticClass:"end-date"},[a("strong",[t._v("Buyer:")]),a("span",[t._v(t._s(this.buyer))])]):t._e(),a("div",{staticClass:"description-body"},[a("strong",[t._v("Description:")]),a("span",[t._v(t._s(t.description))])]),t.isEditable?a("router-link",{staticClass:"edit-btn secondary-btn",attrs:{to:"/auction/"+t.id+"/edit"}},[t._v("Edit")]):t._e()],1),void 0!==t.startDate?a("div",{staticClass:"bidding-container"},[a("div",{staticClass:"bid-table"},[a("span",{staticClass:"live-coundown"},[t._v(t._s(this.now))]),this.isAuctionLive&&t.getUser()?a("place-bid-input",{attrs:{auctionId:t.id}}):t._e(),a("div",{staticClass:"bid-box"},t._l(t.bids,(function(t){return a("bid-card",{key:t.id,attrs:{timeStamp:new Date(t.timeStamp),price:parseFloat(t.price),username:t.author.username}})})),1)],1)]):t._e()])},ge=[],fe={name:"AuctionShow",components:{BidCard:at,PlaceBidInput:bt,VImage:L},data(){return{socket:mt()("https://localhost:3000"),now:"",liveCounDownInterval:null,isAuctionLive:!1,id:null,name:"",description:"",image:"",price:null,endDate:"",startDate:"",author:"",buyer:"",bids:[]}},created(){this.getAuctionInfo()},beforeDestroy(){clearInterval(this.liveCounDownInterval),this.leaveBiddingRoom()},computed:{isStarted(){const t=new Date,e=new Date(this.startDate);return t>=e},isEnded(){const t=new Date,e=new Date(this.endDate);return t>e},isUserAuthor(){return this.getUser()===this.author},isEditable(){return!this.isStarted&&this.isUserAuthor&&(""===this.buyer||void 0===this.buyer)},shouldDisplayBuyer(){const t=this.isEnded&&(""!==this.buyer||void 0!==this.buyer),e=void 0===this.endDate&&void 0===this.startDate&&void 0!==this.buyer;return t||e}},methods:{...Object(c["b"])(["getUser"]),formatedDate(t){return W()(t).format("LLL")},liveAuctionCountDown(){const t=new Date;let e,a;if(t<this.startDate){if(this.now="starts in "+S(this.startDate),e=this.startDate-t,e>0){const t=e<=36e5?1e3:6e4;this.liveCounDownInterval=setInterval(()=>{a=S(this.startDate),"expired"===a?(this.isAuctionLive=!0,a=S(this.endDate),this.isAuctionLive="expired"!==a,this.now=a):this.now="starts in "+S(this.startDate)},t)}}else if(t<this.endDate&&(this.now=S(this.endDate),e=this.endDate-t,e>0)){const t=e<=36e5?1e3:6e4;this.liveCounDownInterval=setInterval(()=>{a=S(this.endDate),this.isAuctionLive="expired"!==a,this.now=a},t)}},async buyAuction(){try{const t=await this.$http.patch(`api/auction/${this.id}/buy`);Va.$emit("changeMessage",t.data.msg,"success")}catch(t){console.log(t.response)}},async getAuctionInfo(){try{const t=await this.$http.get("/api/auction/"+this.$route.params.id),{_id:e,name:a,description:s,image:i,price:n,endDate:r,startDate:o,bids:c,author:l,buyer:u}=t.data;this.id=e,this.name=a,this.description=s,this.image=i,this.price=n,this.endDate=void 0!==r?new Date(r):void 0,this.startDate=void 0!==o?new Date(o):void 0,this.bids=c.reverse(),this.author=void 0!==l?l.username:void 0,this.buyer=void 0!==u?u.username:void 0,this.joinBiddingRoom(),void 0!==this.startDate&&void 0!==this.endDate&&(this.isAuctionLive=this.isStarted&&!this.isEnded,this.liveAuctionCountDown())}catch(t){this.$router.replace("/error-notfound")}},joinBiddingRoom(){this.socket.emit("joinBidding",{room:this.id}),this.socket.on("sendBid",t=>{this.bids.unshift(t)})},leaveBiddingRoom(){this.socket.emit("leaveBidding",{room:this.id}),this.socket.removeAllListeners()}}},be=fe,ye=(a("16c0"),Object(d["a"])(be,ve,ge,!1,null,null,null)),_e=ye.exports,Ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("div",{staticClass:"new-auction-container"},[a("h2",[t._v("Edit Auction")]),a("button",{staticClass:"secondary-btn delete-btn",attrs:{type:"submit"},on:{click:t.deleteAuction}},[t._v("Delete Auction")]),t._l(t.mainFields,(function(e){return a("text-input",{key:e.name,attrs:{value:e.value,name:e.name,type:e.type,validation:e.validation},on:{validateField:t.validateAuctionFields},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"field.value"}})})),a("area-text",{attrs:{value:t.description.value,name:t.description.name,validation:t.description.validation},on:{validateField:t.validateAuctionFields},model:{value:t.description.value,callback:function(e){t.$set(t.description,"value",e)},expression:"description.value"}}),a("switch-button",{attrs:{trueLabel:"buy now",falseLabel:"auction"},model:{value:t.isAuction,callback:function(e){t.isAuction=e},expression:"isAuction"}}),a("div",{staticClass:"end-date-container",class:{open:t.isAuction}},t._l(t.dateFields,(function(e){return a("text-input",{key:e.name,attrs:{value:e.value,name:e.name,type:e.type,validation:e.validation},on:{validateField:t.validateAuctionFields},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"field.value"}})})),1),a("button",{staticClass:"primary-btn",attrs:{type:"submit",disabled:!t.isReadyToUpdate},on:{click:t.updateAuction}},[t._v("Update")])],2)])},je=[],we={name:"EditAuction",components:{TextInput:Lt,AreaText:ut,SwitchButton:St},data(){return{id:"",author:"",buyer:"",startDate:"",mainFields:[{isValid:!0,name:"image link",value:"",validation:{spaces:!0}},{isValid:!0,name:"name",value:"",validation:{required:!0}},{isValid:!0,name:"starting price",value:"",type:"Number",validation:{required:!0,spaces:!0}},{isValid:!0,name:"tags",value:"",validation:{}}],description:{isValid:!0,name:"description",value:"",validation:{required:!0}},isAuction:!0,dateFields:[{isValid:!0,name:"start date",value:"",type:"Date",validation:{required:!0}},{isValid:!0,name:"start time",value:"",type:"Time",validation:{required:!0}},{isValid:!0,name:"end date",value:"",type:"Date",validation:{required:!0}},{isValid:!0,name:"end time",value:"",type:"Time",validation:{required:!0}}]}},created(){this.getAuctionInfo()},methods:{...Object(c["b"])(["getUser"]),async getAuctionInfo(){try{const t=await this.$http.get("/api/auction/"+this.$route.params.id),{_id:e,author:a,buyer:s,name:i,description:n,image:r,price:o,tags:c,endDate:l,startDate:u}=t.data;this.id=e,this.author=a.username,this.buyer=void 0!==s?s.username:void 0,this.mainFields[0].value=r,this.mainFields[1].value=i,this.mainFields[2].value=o.toString(),this.mainFields[3].value=c.join(" "),this.description.value=n,this.isAuction=void 0!==l,this.startDate=u,this.dateFields[0].value=void 0!==u?u.substring(0,10):"",this.dateFields[1].value=void 0!==u?u.substring(11,16):"",this.dateFields[2].value=void 0!==u?l.substring(0,10):"",this.dateFields[3].value=void 0!==u?l.substring(11,16):"",this.isUserAuthor?this.isEditable?this.isStarted&&(Va.$emit("changeMessage","you can't edit auction that has already started","error"),this.$router.replace("/")):(Va.$emit("changeMessage","you can't edit this auction","error"),this.$router.replace("/")):(Va.$emit("changeMessage","you are not authorized to do this","error"),this.$router.replace("/"))}catch(t){this.$router.replace("/error-notfound")}},async updateAuction(){const t={name:this.mainFields[1].value,description:this.description.value,tags:this.mainFields[3].value.split(" "),image:this.mainFields[0].value,price:parseFloat(this.mainFields[2].value),startDate:this.isAuction?`${this.dateFields[0].value} ${this.dateFields[1].value}`:void 0,endDate:this.isAuction?`${this.dateFields[2].value} ${this.dateFields[3].value}`:void 0};try{const e=await this.$http.put("/api/auction/"+this.id,t);Va.$emit("changeMessage","succesfully updated auction","success"),this.$router.push("/auction/"+e.data.auction._id)}catch(e){let t="something went wrong";void 0!==e.response.data.msg.endDate?t=e.response.data.msg.endDate:void 0!==e.response.data.msg.startDate&&(t=e.response.data.msg.startDate),Va.$emit("changeMessage",t,"error")}},async deleteAuction(){try{const t=await this.$http.delete("/api/auction/"+this.$route.params.id);Va.$emit("changeMessage",t.data.msg,"success"),this.$router.push("/profile/my-auctions")}catch(t){""===t.response.data.msg&&void 0===t.response.data.msg||Va.$emit("changeMessage",t.response.data.msg,"error")}},validateAuctionFields(t,e){"description"===t&&(this.description.isValid=e),this.mainFields=this.mainFields.map(a=>t===a.name?{...a,isValid:e}:a),this.dateFields=this.dateFields.map(a=>t===a.name?{...a,isValid:e}:a)}},computed:{isReadyToUpdate(){const t=this.mainFields.reduce((t,e)=>t&&e.isValid,!0);let e=this.dateFields.reduce((t,e)=>t&&e.isValid,!0);e=!this.isAuction||e;const a=this.description.isValid;return t&&a&&e},isUserAuthor(){return this.getUser()===this.author},isStarted(){const t=new Date,e=new Date(this.startDate);return t>=e},isEditable(){return!this.isStarted&&this.isUserAuthor&&(""===this.buyer||void 0===this.buyer)}}},De=we,Ae=(a("27de"),Object(d["a"])(De,Ce,je,!1,null,null,null)),xe=Ae.exports,ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"profile-container"},[a("nav",{staticClass:"profile-nav",class:{hide:!t.showSubNavBar}},[a("ul",{staticClass:"profile-navigation-tab"},[a("button",{staticClass:"menu-button",on:{click:t.toggleSubNav}},[t._v("hide")]),a("router-link",{staticClass:"profile-nav-item",attrs:{to:"/profile/my-auctions"}},[t._v("My Auctions")]),a("router-link",{staticClass:"profile-nav-item",attrs:{to:"/profile/live-auctions"}},[t._v("Live Auction Pannel")]),a("router-link",{staticClass:"profile-nav-item",attrs:{to:"/profile/participated"}},[t._v("Participations")]),a("router-link",{staticClass:"profile-nav-item",attrs:{to:"/profile/purchased"}},[t._v("Purchased")])],1)]),a("div",{staticClass:"profile-content"},[a("button",{staticClass:"menu-button",on:{click:t.toggleSubNav}},[t._v("show")]),a("router-view")],1)])},$e=[],Pe={name:"Profile",data(){return{showSubNavBar:!0}},methods:{toggleSubNav(){this.showSubNavBar=!this.showSubNavBar}}},Se=Pe,Fe=(a("6346"),Object(d["a"])(Se,ke,$e,!1,null,null,null)),Ue=Fe.exports,Ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"live-auctioncontainer"},[a("h2",[t._v("Live auctions")]),t.myLiveAuctions.spinner?t._e():a("div",t._l(t.myLiveAuctions.auctions,(function(t){return a("auction-card-live",{key:t._id,attrs:{id:t._id,name:t.name,image:t.image,price:t.price,endDate:new Date(t.endDate),bids:t.bids}})})),1)])},Oe=[],Re={name:"MyLiveAuctions",components:{AuctionCardLive:Tt},data(){return{myAuctionPage:1,myLiveAuctions:{auctions:[],spinner:!0},searchQuery:""}},created(){this.getAllParticipatedInAuction()},methods:{getAllParticipatedInAuction(){this.$http.get("/api/user/live-auctions").then(t=>{this.myLiveAuctions.auctions=t.data.auctions,this.myLiveAuctions.spinner=!1}).catch(t=>{console.log(t.respnse)})}}},Le=Re,Ie=(a("f2b2"),Object(d["a"])(Le,Ee,Oe,!1,null,null,null)),Me=Ie.exports,Ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-auction-container"},[a("h2",[t._v("My Auctions")]),t.auctions.spinner?t._e():a("div",{staticClass:"aucion-box"},[t._l(t.auctions.list,(function(t){return a("auction-card-mini",{key:t._id,attrs:{id:t._id,name:t.name,descriptions:t.description,image:t.image,price:t.price,endDate:new Date(t.endDate)}})})),a("pagination",{attrs:{currentPage:t.auctions.currentPage,prev:t.auctions.prevPage,next:t.auctions.nextPage},model:{value:t.auctions.currentPage,callback:function(e){t.$set(t.auctions,"currentPage",e)},expression:"auctions.currentPage"}})],2)])},Te=[],Be={name:"MyAuctions",components:{AuctionCardMini:H,Pagination:Ht},data(){return{auctions:{nextPage:null,prevPage:null,currentPage:1,list:[],spinner:!0}}},created(){this.getAllAuthorAuction()},methods:{getAllAuthorAuction(){this.$http.get("/api/user/my-auctions?limit=5&page="+this.auctions.currentPage).then(t=>{this.auctions.list=t.data.auctions.items,this.auctions.nextPage=t.data.auctions.next,this.auctions.prevPage=t.data.auctions.prev,this.auctions.spinner=!1}).catch(t=>{console.log(t.respnse)})}},computed:{getCurrentPage(){return this.auctions.currentPage}},watch:{getCurrentPage(){this.getAllAuthorAuction()}}},Ne=Be,ze=(a("0155"),Object(d["a"])(Ne,Ve,Te,!1,null,null,null)),qe=ze.exports,Qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"participated-auction-container"},[a("h2",[t._v("Participated auctions")]),t.auctions.spinner?t._e():a("div",{staticClass:"aucion-box"},[t._l(t.auctions.list,(function(t){return a("auction-card-mini",{key:t._id,attrs:{id:t._id,name:t.name,descriptions:t.description,image:t.image,price:t.price,endDate:new Date(t.endDate)}})})),a("pagination",{attrs:{currentPage:t.auctions.currentPage,prev:t.auctions.prevPage,next:t.auctions.nextPage},model:{value:t.auctions.currentPage,callback:function(e){t.$set(t.auctions,"currentPage",e)},expression:"auctions.currentPage"}})],2)])},He=[],Ge={name:"MyAuctions",components:{AuctionCardMini:H,Pagination:Ht},data(){return{auctions:{nextPage:null,prevPage:null,currentPage:1,list:[],spinner:!0}}},created(){this.getAllAuthorAuction()},methods:{getAllAuthorAuction(){this.$http.get("/api/user/participations?limit=5&page="+this.auctions.currentPage).then(t=>{this.auctions.list=t.data.auctions.items,this.auctions.nextPage=t.data.auctions.next,this.auctions.prevPage=t.data.auctions.prev,this.auctions.spinner=!1}).catch(t=>{console.log(t.respnse)})}},computed:{getCurrentPage(){return this.auctions.currentPage}},watch:{getCurrentPage(){this.getAllAuthorAuction()}}},Je=Ge,Xe=(a("d971"),Object(d["a"])(Je,Qe,He,!1,null,null,null)),Ze=Xe.exports,Ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"purhased-auction-container"},[a("h2",[t._v("Purchased auctions")]),t.auctions.spinner?t._e():a("div",{staticClass:"aucion-box"},[t._l(t.auctions.list,(function(t){return a("auction-card-mini",{key:t._id,attrs:{id:t._id,name:t.name,descriptions:t.description,image:t.image,price:t.price,endDate:new Date(t.endDate)}})})),a("pagination",{attrs:{currentPage:t.auctions.currentPage,prev:t.auctions.prevPage,next:t.auctions.nextPage},model:{value:t.auctions.currentPage,callback:function(e){t.$set(t.auctions,"currentPage",e)},expression:"auctions.currentPage"}})],2)])},We=[],Ye={name:"Purchased",components:{AuctionCardMini:H,Pagination:Ht},data(){return{auctions:{nextPage:null,prevPage:null,currentPage:1,list:[],spinner:!0}}},created(){this.getAllPurchases()},methods:{async getAllPurchases(){try{const t=await this.$http.get("/api/user/purchased?limit=5&page="+this.auctions.currentPage);this.auctions.list=t.data.auctions.items,this.auctions.nextPage=t.data.auctions.next,this.auctions.prevPage=t.data.auctions.prev,this.auctions.spinner=!1}catch(t){console.log(t.respnse)}}},computed:{getCurrentPage(){return this.auctions.currentPage}},watch:{getCurrentPage(){this.getAllAuthorAuction()}}},ta=Ye,ea=(a("211a"),Object(d["a"])(ta,Ke,We,!1,null,null,null)),aa=ea.exports,sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chat-container"},[a("button",{staticClass:"toggle-btn-hide",on:{click:t.toggleHideRooms}},[t._v("show")]),a("div",{staticClass:"chat-rooms",class:{hide:t.hideRooms}},[a("button",{staticClass:"toggle-btn-hide",on:{click:t.toggleHideRooms}},[t._v("hide")]),a("search-bar",{on:{search:t.searchUserByUsername},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}}),0===t.searchedUsers.length?a("div",{staticClass:"my-rooms"},t._l(t.lsitOfContacts,(function(e){return a("div",{key:e.id,staticClass:"room",on:{click:function(a){return t.gotToChat(e.id)}}},[a("span",{staticClass:"username"},[t._v(t._s(e.username))]),e.unreadMessages?a("span",{staticClass:"dot"}):t._e()])})),0):t._e(),t.searchedUsers.length>0?a("div",{staticClass:"searched-users"},[a("button",{staticClass:"clear-btn",on:{click:t.clearSearchResults}},[t._v("clear")]),t._l(t.searchedUsers,(function(e){return a("div",{key:e.id,staticClass:"room",on:{click:function(a){return t.createChatRoom(e.username)}}},[t._v(" "+t._s(e.username)+" ")])}))],2):t._e()],1),a("div",{staticClass:"chat-wrap"},[a("router-view")],1)])},ia=[],na={name:"Chat",components:{SearchBar:Dt},data(){return{hideRooms:!1,searchQuery:"",myChatRooms:[],searchedUsers:[]}},created(){this.getMyChatRooms()},methods:{...Object(c["b"])(["getUser"]),toggleHideRooms(){this.hideRooms=!this.hideRooms},gotToChat(t){this.$router.push("/chat/"+t).catch(()=>{})},async getMyChatRooms(){try{const t=await this.$http.get("/api/chat/my-chat"),e=await this.$http.get("/api/chat/unread-messages");this.myChatRooms=t.data.chatRooms.map(t=>e.data.chatRooms.find(e=>e._id===t._id)?{...t,unreadMessages:!0}:{...t,unreadMessages:!1})}catch(t){console.log(t.response)}},async searchUserByUsername(){try{const t=await this.$http.get("/api/chat/users?username="+this.searchQuery);let e=t.data.users.filter(t=>t.username!==this.getUser());e=e.filter(t=>!this.lsitOfContacts.find(e=>e.username===t.username)),this.searchedUsers=e.map(t=>({id:t._id,username:t.username}))}catch(t){console.log(t.response)}},clearSearchResults(){this.searchedUsers=[]},async createChatRoom(t){try{const e=await this.$http.post("/api/chat/"+t),a=e.data.chatRoom;this.myChatRooms.push(a)}catch(e){console.log(e.response)}}},computed:{lsitOfContacts(){return this.myChatRooms.map(t=>({id:t._id,username:t.participants.filter(t=>t.user.username!==this.getUser()).map(t=>t.user.username)[0],unreadMessages:t.unreadMessages}))}}},ra=na,oa=(a("9c66"),Object(d["a"])(ra,sa,ia,!1,null,null,null)),ca=oa.exports,la=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},ua=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"error-page-contaier"},[a("h1",[t._v("Error - page not fount")])])}],da={name:"ErrorPage"},ha=da,pa=(a("2e4b"),Object(d["a"])(ha,la,ua,!1,null,null,null)),ma=pa.exports,va=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.spinner?t._e():a("div",{staticClass:"chat-box-container"},[a("div",{staticClass:"chat-box"},[a("h2",{staticClass:"chat-room-title"},[a("span",{staticClass:"username"},[t._v(t._s(this.username))]),a("span",{staticClass:"dot",class:{online:2==this.userOnlineCount}})]),a("div",{staticClass:"conversation-box"},[t.conversation!==[]?a("div",{staticClass:"conversation-section"},t._l(t.conversation,(function(e){return a("post",{key:e._id,attrs:{username:e.author.username,timeStamp:new Date(e.timeStamp),recieved:e.recieved,message:e.content,isAuthor:e.author.username===t.getUser()}})})),1):t._e()]),a("div",{staticClass:"post-input"},[a("area-text",{attrs:{value:t.post,name:"message"},model:{value:t.post,callback:function(e){t.post=e},expression:"post"}}),a("button",{staticClass:"blue-btn",on:{click:t.sendAMessage}},[t._v("send")])],1)])])},ga=[],fa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"post-container",class:{author:this.isAuthor,newMsg:!this.recieved&&!this.isAuthor}},[a("strong",{staticClass:"username"},[t._v(t._s(this.username))]),a("p",{staticClass:"message"},[t._v(t._s(this.message))]),a("span",{staticClass:"time-stamp"},[t._v(t._s(t.momentTime))])])},ba=[],ya={name:"Post",props:{message:{type:String},recieved:{type:Boolean},timeStamp:{type:Date},username:{type:String},isAuthor:{type:Boolean,default:!1}},computed:{momentTime(){return W()(this.timeStamp).fromNow()}}},_a=ya,Ca=(a("bef4"),Object(d["a"])(_a,fa,ba,!1,null,null,null)),ja=Ca.exports,wa={name:"ChatBox",components:{AreaText:ut,Post:ja},data(){return{socket:mt()("https://localhost:3000"),post:"",userOnlineCount:0,username:"",chatId:"",spinner:!0,conversation:[]}},watch:{$route(t){this.leaveChatRoom(),this.chatId=t.params.id,this.getChatRoomInfo()}},created(){this.getChatRoomInfo()},updated(){this.scrollToEnd()},destroyed(){this.leaveChatRoom()},methods:{...Object(c["b"])(["getUser"]),async getChatRoomInfo(){try{const t=await this.$http.get("/api/chat/"+this.$route.params.id);this.spinner=!1,this.username=t.data.chatRoom.participants.filter(t=>t.user.username!==this.getUser()).map(t=>t.user.username)[0],this.chatId=t.data.chatRoom._id,this.conversation=t.data.chatRoom.messages,this.recieveUnreadMessages(),this.joinChatRoom()}catch(t){console.log(t.response)}},leaveChatRoom(){this.socket.emit("unsubscribe",{room:this.chatId,user:this.getUser()}),this.socket.removeAllListeners()},joinChatRoom(){this.socket.emit("subscribe",{room:this.chatId}),this.socket.on("roomInfo",t=>{this.userOnlineCount=t}),this.socket.on("sendInfo",t=>{this.conversation.push(t)})},async recieveUnreadMessages(){try{await this.$http.patch(`/api/chat/${this.chatId}/recieve`)}catch(t){console.log(t.resposne)}},async sendAMessage(){try{const t={message:this.post,recieved:2===this.userOnlineCount},e=await this.$http.patch("/api/chat/"+this.chatId,t);this.conversation.push(e.data.message),this.socket.emit("sendMsg",{post:e.data.message,roomId:this.chatId}),this.post=""}catch(t){console.log(t.response)}},scrollToEnd(){const t=document.querySelector(".conversation-section"),e=t.scrollHeight;t.scrollTop=e}}},Da=wa,Aa=(a("7874"),Object(d["a"])(Da,va,ga,!1,null,null,null)),xa=Aa.exports,ka=a("bc3a"),$a=a.n(ka);const Pa={user:null},Sa={getUser:t=>t.user},Fa={LOGOUT:({commit:t})=>{$a.a.get("https://localhost:3000/api/auth/logout",{withCredentials:!0}).then(()=>{Ia.push("/").catch(()=>{}),t("UPDATE_USER",null)})}},Ua={UPDATE_USER(t,e){t.user=e}};var Ea={state:Pa,getters:Sa,actions:Fa,mutations:Ua};s["a"].use(c["a"]);var Oa=new c["a"].Store({modules:{user:Ea}});s["a"].use(D["a"]);const Ra=[{path:"/",name:"Home",component:Zt},{path:"/login",name:"Login",component:ae},{path:"/register",name:"Register",component:ce},{path:"/new-auction",name:"NewAuction",component:me,beforeEnter:(t,e,a)=>{null===Oa.state.user.user?a("/login"):a()}},{path:"/auction/:id",name:"AuctionShow",component:_e},{path:"/auction/:id/edit",name:"EditAuction",component:xe},{path:"/profile",name:"Profile",component:Ue,beforeEnter:(t,e,a)=>{null===Oa.state.user.user?a("/login"):a()},redirect:{name:"MyAuctions"},children:[{name:"LiveAuctions",path:"live-auctions",component:Me},{name:"MyAuctions",path:"my-auctions",component:qe},{name:"Participated",path:"participated",component:Ze},{name:"Purchased",path:"purchased",component:aa}]},{path:"/chat",name:"Chat",component:ca,children:[{path:":id",component:xa}],beforeEnter:(t,e,a)=>{null===Oa.state.user.user?a("/login"):a()}},{path:"/error-notfound",name:"ErrorPage",component:ma},{path:"/*",redirect:{name:"ErrorPage"}}],La=new D["a"]({mode:"history",base:"/",routes:Ra});var Ia=La;s["a"].config.productionTip=!1;const Ma=$a.a.create({baseURL:"https://localhost:3000/",withCredentials:!0});s["a"].prototype.$http=Ma;const Va=new s["a"];new s["a"]({store:Oa,router:Ia,render:t=>t(w)}).$mount("#app")},"57af":function(t,e,a){"use strict";var s=a("e910"),i=a.n(s);i.a},"5b63":function(t,e,a){},"5c0b":function(t,e,a){"use strict";var s=a("9c0c"),i=a.n(s);i.a},"5df1":function(t,e,a){},"5eaf":function(t,e,a){"use strict";var s=a("2aa4"),i=a.n(s);i.a},6346:function(t,e,a){"use strict";var s=a("4dc3"),i=a.n(s);i.a},7874:function(t,e,a){"use strict";var s=a("5df1"),i=a.n(s);i.a},"7cd0":function(t,e,a){},8264:function(t,e,a){},"89f7":function(t,e,a){},"8aed":function(t,e,a){},"8b13":function(t,e,a){},"8cf7":function(t,e,a){"use strict";var s=a("8aed"),i=a.n(s);i.a},"95ab":function(t,e,a){},"96d5":function(t,e,a){},"9b19":function(t,e,a){t.exports=a.p+"img/logo.c2eef5e3.svg"},"9c0c":function(t,e,a){},"9c66":function(t,e,a){"use strict";var s=a("8264"),i=a.n(s);i.a},a894:function(t,e,a){"use strict";var s=a("db38"),i=a.n(s);i.a},ba9a:function(t,e,a){},bc1d:function(t,e,a){},bef4:function(t,e,a){"use strict";var s=a("5b63"),i=a.n(s);i.a},c2b1:function(t,e,a){},c5b1:function(t,e,a){"use strict";var s=a("96d5"),i=a.n(s);i.a},cd8c:function(t,e,a){},d0a0:function(t,e,a){},d0a1:function(t,e,a){},d971:function(t,e,a){"use strict";var s=a("d0a0"),i=a.n(s);i.a},db38:function(t,e,a){},dd5f:function(t,e,a){"use strict";var s=a("0f65"),i=a.n(s);i.a},e424:function(t,e,a){},e910:function(t,e,a){},e917:function(t,e,a){"use strict";var s=a("95ab"),i=a.n(s);i.a},e93e:function(t,e,a){"use strict";var s=a("e97a"),i=a.n(s);i.a},e97a:function(t,e,a){},f2b2:function(t,e,a){"use strict";var s=a("c2b1"),i=a.n(s);i.a}});
//# sourceMappingURL=app.b752868b.js.map